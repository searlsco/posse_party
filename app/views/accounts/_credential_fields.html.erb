<% if account.platform_tag.blank? %>
  <div class="p-4 italic text-secondary border rounded-lg border-primary bg-secondary/40">
    Select a platform to configure platform-specific options.
  </div>
<% else %>
  <% platform_api = PublishesCrosspost::MatchesPlatformApi.new.match(account) %>
  <div class="p-4 space-y-4 border rounded-lg bg-secondary border-primary">
    <h3 class="mb-3 text-sm font-semibold text-primary">Credentials for <%= platform_api.class::LABEL %></h3>
    <% account.required_credentials.each do |credential_key| %>
      <div>
        <%= label_tag "account_credentials_#{credential_key}",
          platform_api.credential_labels.fetch(credential_key, credential_key.humanize(keep_id_suffix: true)),
          class: "block mb-1 text-sm font-medium text-primary" %>
        <%= text_field_tag "account_credentials[#{credential_key}]",
              account.credentials[credential_key],
              id: "account_credentials_#{credential_key}",
              class: "w-full px-3 py-2 transition-all duration-200 border rounded-lg border-primary bg-primary focus:outline-none focus:ring-2 focus:ring-accent focus:border-accent",
              data: { turbo_permanent: "true" } %>
      </div>
    <% end %>
    <% account.system_credentials.each do |credential_key| %>
      <div>
        <%= label_tag "system_credential_#{credential_key}", "#{credential_key.humanize(keep_id_suffix: true)} (system)", class: "block mb-1 text-sm font-medium text-secondary" %>
        <%= text_field_tag "system_credential_#{credential_key}",
              account.credentials[credential_key],
              id: "system_credential_#{credential_key}",
              disabled: true,
              class: "w-full px-3 py-2 border rounded-lg cursor-not-allowed border-primary bg-tertiary text-secondary",
              data: { turbo_permanent: "true" } %>
      </div>
    <% end %>
  </div>
<% end %>
