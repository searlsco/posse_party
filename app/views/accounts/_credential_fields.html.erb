<% if account.platform_tag.blank? %>
  <div class="p-4 italic border rounded-lg text-secondary border-primary bg-secondary/40">
    Select a platform to configure platform-specific options.
  </div>
<% else %>
  <% platform_api = PublishesCrosspost::MatchesPlatformApi.new.match(account) %>
  <div class="p-4 space-y-4 border rounded-lg bg-secondary border-primary">
    <h3 class="mb-3 text-sm font-semibold text-primary">
      Credentials for <%= account.platform_label %>
      <% if platform_api.setup_docs_available? %>
        - <%= link_to "Setup instructions",
          doc_path("#{account.platform_tag}-account-setup"),
          class: "underline text-accent",
          target: "_blank",
          rel: "noopener" %>
      <% end %>
    </h3>
    <% account.required_credentials.each do |credential_key| %>
      <%= render "masked_credential_field",
        id: "account_credentials_#{credential_key}",
        name: "account_credentials[#{credential_key}]",
        value: account.credentials[credential_key],
        label: platform_api.credential_labels.fetch(credential_key, to_credentials_label(credential_key)),
        disabled: false %>
    <% end %>
    <% account.system_credentials.each do |credential_key| %>
      <%= render "masked_credential_field",
        id: "system_credential_#{credential_key}",
        name: "system_credential_#{credential_key}",
        value: account.credentials[credential_key],
        label: "#{to_credentials_label(credential_key)} (system)",
        disabled: true %>
    <% end %>
  </div>
<% end %>
