<svg width="100" height="100" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
  <% if local_assigns[:letterpress] %>
    <!-- Letterpress version -->
    <defs>
      <!-- Clipping mask for cone-aligned dots -->
      <clipPath id="coneClipOutline">
        <path d="M 30 8 L 5 70 L 55 70 Z"/>
      </clipPath>
      
      <!-- Inset shadow filter for embossed effect -->
      <filter id="inset">
        <!-- Inner dark shadow -->
        <feGaussianBlur in="SourceAlpha" stdDeviation="2" result="blur"/>
        <feOffset in="blur" dx="2" dy="2" result="offsetBlur"/>
        <feFlood flood-color="#000000" flood-opacity="0.8"/>
        <feComposite in2="offsetBlur" operator="out"/>
        <feComposite in2="SourceAlpha" operator="in" result="innerShadow1"/>
        
        <!-- Inner light shadow -->
        <feOffset in="blur" dx="-2" dy="-2" result="offsetBlur2"/>
        <feFlood flood-color="#ffffff" flood-opacity="0.6"/>
        <feComposite in2="offsetBlur2" operator="out"/>
        <feComposite in2="SourceAlpha" operator="in" result="innerShadow2"/>
        
        <!-- Merge -->
        <feMerge>
          <feMergeNode in="innerShadow1"/>
          <feMergeNode in="innerShadow2"/>
          <feMergeNode in="SourceGraphic"/>
        </feMerge>
      </filter>
    </defs>
    
    <!-- Main party hat group - flipped horizontally, pointing down and to the right -->
    <g transform="translate(50, 50) scale(-1, 1) rotate(135) translate(-30, -40)">
      <!-- Hat cone with embossed effect -->
      <path d="M 30 8 L 5 70 L 55 70 Z" fill="currentColor" opacity="0.15" filter="url(#inset)"/>
      
      <!-- Polka dots clipped to cone shape - embossed -->
      <g clip-path="url(#coneClipOutline)">
        <circle cx="42" cy="38" r="7" fill="currentColor" opacity="0.1" filter="url(#inset)"/>
        <circle cx="15" cy="50" r="5" fill="currentColor" opacity="0.1" filter="url(#inset)"/>
        <circle cx="30" cy="60" r="8" fill="currentColor" opacity="0.1" filter="url(#inset)"/>
      </g>
      
      <!-- Party hat band embossed -->
      <rect x="5" y="65" width="50" height="8" rx="2" ry="2" fill="currentColor" opacity="0.15" filter="url(#inset)"/>
      
      <!-- Pom pom embossed -->
      <circle cx="30" cy="8" r="8" fill="currentColor" opacity="0.15" filter="url(#inset)"/>
      
      <!-- Ribbon streamers -->
      <g transform="translate(30, 76)">
        <path d="M -15 0 Q -19 6 -25 10 Q -28 15 -30 20" 
              stroke="currentColor" stroke-width="3" fill="none" opacity="0.4"/>
        <path d="M -6 0 Q -9 4 -14 8 Q -17 13 -19 18" 
              stroke="currentColor" stroke-width="3" fill="none" opacity="0.4"/>
        <path d="M 6 0 Q 9 4 14 8 Q 17 13 19 18" 
              stroke="currentColor" stroke-width="3" fill="none" opacity="0.4"/>
        <path d="M 15 0 Q 19 6 25 10 Q 28 15 30 20" 
              stroke="currentColor" stroke-width="3" fill="none" opacity="0.4"/>
      </g>
    </g>
  <% else %>
    <!-- Colorful version -->
    <defs>
      <!-- Hat gradient with subtle top-left lighting -->
      <linearGradient id="hatGradient" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop offset="0%" style="stop-color:#FFFACD;stop-opacity:1" />
        <stop offset="50%" style="stop-color:#FFD700;stop-opacity:1" />
        <stop offset="100%" style="stop-color:#F4C430;stop-opacity:1" />
      </linearGradient>
      
      <!-- Subtle accent gradient for pom pom -->
      <linearGradient id="pomGradient" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop offset="0%" style="stop-color:oklch(65% 0.26685 311.87);stop-opacity:1" />
        <stop offset="100%" style="stop-color:oklch(52.737% 0.25869 310.11);stop-opacity:1" />
      </linearGradient>
      
      <!-- Band gradient -->
      <linearGradient id="bandGradient" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop offset="0%" style="stop-color:oklch(65% 0.26685 311.87);stop-opacity:1" />
        <stop offset="100%" style="stop-color:oklch(52.737% 0.25869 310.11);stop-opacity:1" />
      </linearGradient>
      
      <!-- Subtle gradients for dots -->
      <linearGradient id="dotGradient1" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop offset="0%" style="stop-color:#FF6B6B;stop-opacity:1" />
        <stop offset="100%" style="stop-color:#DC143C;stop-opacity:1" />
      </linearGradient>
      
      <linearGradient id="dotGradient2" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop offset="0%" style="stop-color:#40E0D0;stop-opacity:1" />
        <stop offset="100%" style="stop-color:#00CED1;stop-opacity:1" />
      </linearGradient>
      
      <linearGradient id="dotGradient3" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop offset="0%" style="stop-color:#50C878;stop-opacity:1" />
        <stop offset="100%" style="stop-color:#32CD32;stop-opacity:1" />
      </linearGradient>
      
      <!-- Clipping mask for cone-aligned dots -->
      <clipPath id="coneClip">
        <path d="M 30 8 L 5 70 L 55 70 Z"/>
      </clipPath>
      
      <filter id="subtleShadow">
        <feDropShadow dx="0.5" dy="0.5" stdDeviation="0.3" flood-opacity="0.15"/>
      </filter>
    </defs>
    
    <!-- Main party hat group - flipped horizontally, pointing down and to the right -->
    <g transform="translate(50, 50) scale(-1, 1) rotate(135) translate(-30, -40)">
      <!-- Hat cone with subtle gradient -->
      <path d="M 30 8 L 5 70 L 55 70 Z" fill="url(#hatGradient)" stroke="#E6B800" stroke-width="1" filter="url(#subtleShadow)"/>
      
      <!-- Polka dots clipped to cone shape and aligned with perspective -->
      <g clip-path="url(#coneClip)">
        <circle cx="42" cy="38" r="7" fill="url(#dotGradient1)"/>
        <circle cx="15" cy="50" r="5" fill="url(#dotGradient2)"/>
        <circle cx="30" cy="60" r="8" fill="url(#dotGradient3)"/>
      </g>
      
      <!-- Party hat band with subtle gradient and rounded corners -->
      <rect x="5" y="65" width="50" height="8" rx="2" ry="2" fill="url(#bandGradient)" stroke="oklch(45% 0.25869 310.11)" stroke-width="1"/>
      
      <!-- Subtle pom pom -->
      <circle cx="30" cy="8" r="8" fill="url(#pomGradient)" stroke="oklch(45% 0.25869 310.11)" stroke-width="1" filter="url(#subtleShadow)"/>
      
      <!-- Ribbon streamers bursting from cone opening -->
      <g transform="translate(30, 76)">
        <path d="M -15 0 Q -19 6 -25 10 Q -28 15 -30 20" 
              stroke="#FF6B6B" stroke-width="4" fill="none" opacity="0.7"/>
        <path d="M -6 0 Q -9 4 -14 8 Q -17 13 -19 18" 
              stroke="url(#dotGradient2)" stroke-width="4" fill="none" opacity="0.7"/>
        <path d="M 6 0 Q 9 4 14 8 Q 17 13 19 18" 
              stroke="url(#dotGradient3)" stroke-width="4" fill="none" opacity="0.7"/>
        <path d="M 15 0 Q 19 6 25 10 Q 28 15 30 20" 
              stroke="#FFD700" stroke-width="4" fill="none" opacity="0.7"/>
      </g>
    </g>
  <% end %>
</svg>