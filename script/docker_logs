#!/usr/bin/env bash
set -euo pipefail

compose_file="docker-compose.yml"

if [[ ! -f "${compose_file}" ]]; then
  echo "docker-compose.yml is missing. Re-run setup.sh on this host." >&2
  exit 1
fi

service="web"
args=("$@")

if [[ ${#args[@]} -eq 0 ]]; then
  args=(-n 200 -f)
else
  first=${args[0]}
  if [[ ${first} != -* ]]; then
    service=${first}
    args=(${args[@]:1})
  fi
fi

docker compose -f "${compose_file}" logs "${args[@]}" "${service}"
